{% extends 'base/base.html'%}
{% block TitlePage %}
  {{ 'Detalle Orden' }}
{% endblock %}
{% block body %}
    <div class="container">
      <!-- Breadcrumbs-->
      <ol class="breadcrumb">
          <li class="breadcrumb-item">
              <a href="#">Procesos</a>
          </li>
          <li class="breadcrumb-item">
              <a href="#">Ordenes</a>
          </li>
          <li class="breadcrumb-item active">
              Detalle de Orden
          </li>
      </ol>

      <div class="jumbotron">
        <h1 class="display-5">MESA #<span id="numeroMesa"></span></h1>
        <hr class="my-4">
        <div class="row">
          <div class="col-md-4">
            <label>Mesero:</label>
            <strong><span id="lblNombreMesero"></span></strong>
          </div>
          <div class="col-md-4">
            <label>Cliente:</label>
            <strong><span id="lblNombreCliente"></span></strong>
          </div>
          <div class="col-md-4">
            <label>Estado:</label>
            <strong><span id="lblEstado"></span></strong>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
            <label>Comentario:</label>
            <strong><span id="lblComentario"></span></strong>
          </div>
        </div>
      </div>

    {% include 'base/modal.html' %}

{% endblock %}
{% block JavaScriptFiles %}
  <script type="text/javascript">


    $(document).ready(function(){
      //alert(getUrlVars()["id"]);
      cargarDatos();
    });

    function cargarDatos(){
      $.ajax({
        url : "{% url 'procesos:orden_detail' %}",
        data : {id: getUrlVars()["id"]},
        type: "GET",
        dataType: "json",
        success : function (data) {
          //console.log(data);
          //alert('Registro '+data.respuesta);
          $("#numeroMesa").html(data[0].mesa.numero_mesa);
          $("#lblNombreMesero").html(data[0].mesero.nombre+" "+data[0].mesero.apellido);
          $("#lblNombreCliente").html(data[0].cliente);
          $("#lblEstado").html(data[0].estado);
          $("#lblComentario").html(data[0].comentario);
        }
      });
    }

    //Para obtener parametros
    function getUrlVars() {
      var vars = {};
      var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
      });
      return vars;
    }
  </script>
{% endblock %}
